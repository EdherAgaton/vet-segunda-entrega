<!DOCTYPE html>
<html lang="es">

<head>

 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width">

 <title>Agregar Producto</title>

 <script type="module" src="lib/js/submitForm.js"></script>
 <script type="module" src="lib/js/muestraError.js"></script>

 <script type="module" src="./js/ROL_ID_ADMINISTRADOR.js"></script>
 <script type="module" src="./js/protege.js"></script>
 <script type="module" src="./js/custom/mi-nav.js"></script>
 <script type="module" src="lib/js/muestraImagenSeleccionada.js"></script>


</head>

<body

onload="protege('srv/sesion-actual.php', [ROL_ID_ADMINISTRADOR], 'index.html')
   .then(sesion => {
     nav.sesion = sesion
     main.hidden = false
    })
    .then(muestraImagenSeleccionada(forma, forma.imagen))
   .catch(muestraError)"
>

<mi-nav id="nav"></mi-nav>

<main id="main" hidden>

 <form id="forma" onsubmit="submitForm('srv/producto-agrega.php', event)
    .then(modelo => location.href = 'index-productos.html')
    .catch(muestraError)">

  <h1>Agregar Producto</h1>

  <p><a href="index-productos.html">Cancelar</a></p>

  <p>
   <label>
    Nombre *
    <input name="nombre">
   </label>
  </p>

  <p>
   <label>
    PRECIO *
    <input name="precio">
   </label>
  </p>

  <p>
   <label>
    Descripcion *
    <input name="descripcion">
   </label>
  </p>

  <p>
   <label>
    Existencias *
    <input name="existencias">
   </label>
  </p>

  <p>
   <label>
    Imagen *
    <input name="imagen" type="file" accept="image/*" data-img="preview"
      oninput="muestraImagenSeleccionada(forma, this).catch(muestraError)">
   </label>
  </p>

  <p>* Obligatorio</p>

  <p><button type="submit">Agregar</button></p>


  <figure>
   <img id="preview" hidden alt="Imagen del producto" style="max-width: 100%;">
  </figure>

 </form>

</main>

</body>

</html>